(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{tkEC:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("miYZ");var n=r(a("tsqr")),s=r(a("d6i3")),u=r(a("p0pE")),i=a("WzQc"),l={namespace:"users",state:{list:[],queryParams:{current:1,pageSize:10},total:0,user:{},editModalVisible:!1},effects:{getUserList:s.default.mark(function e(t,a){var r,n,l,c,d,o;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,l=a.put,c=a.select,e.next=4,c(function(e){return e.users.queryParams});case 4:return d=e.sent,d=(0,u.default)({},d,r),e.next=8,n(i.query,d);case 8:return o=e.sent,e.next=11,l({type:"set",payload:{list:o.data,total:o.pagination?o.pagination.total:o.data.length,queryParams:(0,u.default)({},r)}});case 11:case"end":return e.stop()}},e)}),getUser:s.default.mark(function e(t,a){var r,n,u,l;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,u=a.put,e.next=4,n(i.find,r);case 4:if(l=e.sent,!l){e.next=8;break}return e.next=8,u({type:"setUser",payload:l.data||[]});case 8:case"end":return e.stop()}},e)}),updateUser:s.default.mark(function e(t,a){var r,u,l,c;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,u=a.call,l=a.select,e.next=4,l(function(e){return e.global.currentUser.id});case 4:if(c=e.sent,!r.id){e.next=10;break}return e.next=8,u(i.update,r,c);case 8:e.next=12;break;case 10:return e.next=12,u(i.add,r,c);case 12:n.default.success("\u4fdd\u5b58\u6210\u529f");case 13:case"end":return e.stop()}},e)}),toggleUserStatus:s.default.mark(function e(t,a){var r,n,u,l,c,d,o;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=r.targetUserId,u=r.enabled,l=a.call,c=a.put,d=a.select,e.next=4,d(function(e){return e.global.currentUser.id});case 4:if(o=e.sent,!u){e.next=10;break}return e.next=8,l(i.thawUser,n);case 8:e.next=12;break;case 10:return e.next=12,l(i.freezeUser,{targetUserId:n,currentUserId:o});case 12:return e.next=14,c({type:"getUserList"});case 14:case"end":return e.stop()}},e)})},reducers:{set:function(e,t){var a=t.payload;return(0,u.default)({},e,a)},setListConditions:function(e,t){var a=t.payload,r=(0,u.default)({},e.listConditions,a);return(0,u.default)({},e,{listConditions:r})},setEditModalVisible:function(e,t){var a=t.payload;return(0,u.default)({},e,{editModalVisible:a})},setUser:function(e,t){var a=t.payload;return(0,u.default)({},e,{user:a})}}};t.default=l}}]);