(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"06A8":function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=n(a("kLXV"));a("miYZ");var u=n(a("tsqr")),d=n(a("qIgq")),i=l(a("q1tI")),o=n(a("rmP6")),s=n(a("uBsN"));a("91UR");var c=a("X7BR"),f=n(a("CDHb")),p=function(e){var t=e.onChange,a=e.value,l=void 0===a?"":a,n=e.placeholder,p=e.style,m=e.defaultValue,v=(0,i.useState)(!1),h=(0,d.default)(v,2),g=h[0],y=h[1],b=(0,i.useState)(l),E=(0,d.default)(b,2),w=E[0],k=E[1],x=(0,i.useRef)(),C=(0,i.useRef)(),M=function(e){k(e),t&&t(e)};(0,i.useEffect)(function(){k(l)},[l]);var R=(0,i.useCallback)(function(){y(!0);var e=x.current.getEditor();e.focus()},[]),S={toolbar:{container:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],handlers:{image:R}}},P=function(){var e=C.current;if(!e)return u.default.warn("\u8bf7\u4e0a\u4f20\u56fe\u7247");var t=x.current.getEditor(),a=t.selection.savedRange.index;t.insertEmbed(a,"image","".concat(c.filePath).concat(e)),t.setSelection(a+1),y(!1)};return i.default.createElement(i.default.Fragment,null,i.default.createElement(o.default,{placeholder:n,ref:x,value:w,onChange:M,modules:S,style:p,defaultValue:m,className:f.default.container}),i.default.createElement(r.default,{onCancel:function(){return y(!1)},onOk:P,title:"\u56fe\u7247\u4e0a\u4f20",visible:g,key:g.toString()},i.default.createElement("div",{className:f.default.uploadImg},i.default.createElement(s.default,{onChange:function(e){return C.current=e}}))))},m=(0,i.memo)(p);t.default=m},CDHb:function(e,t,a){e.exports={uploadImg:"antd-pro-components-rich-editor-index-uploadImg",container:"antd-pro-components-rich-editor-index-container"}},M0Gi:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("jehZ")),r=l(a("2Taf")),u=l(a("vZ4D")),d=l(a("l4Ni")),i=l(a("ujKo")),o=l(a("MhPg"));a("y8nQ");var s=l(a("Vl3Y"));a("5NDa");var c=l(a("5rEg")),f=l(a("q1tI")),p=l(a("PdRM")),m=(a("t3Un"),a("X7BR"),l(a("dm25"))),v=(l(a("dxY5")),c.default.TextArea),h=s.default.Item;localStorage.getItem("accessToken");function g(e,t){var a=new FileReader;a.addEventListener("load",function(){return t(a.result)}),a.readAsDataURL(e)}var y=function(e){function t(){var e,a;(0,r.default)(this,t);for(var l=arguments.length,n=new Array(l),u=0;u<l;u++)n[u]=arguments[u];return a=(0,d.default)(this,(e=(0,i.default)(t)).call.apply(e,[this].concat(n))),a.state={imageUrl:void 0,loading:!1},a.normFile=function(e){var t=e.file;if(t.response)return t.response?t.response.data:void 0},a.handleFileRemove=function(e){var t=a.context.form;t.setFieldsValue({path:void 0})},a.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&g(e.file.originFileObj,function(e){return a.setState({imageUrl:e,loading:!1})}):a.setState({loading:!0})},a}return(0,o.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){this.state.loading;var e=this.context,t=e.form,a=(e.isEdit,e.current),l=(this.state.imageUrl||a.imgUrl,t.getFieldDecorator),r={labelCol:{span:3},wrapperCol:{span:19}};return f.default.createElement("div",{style:{paddingTop:30}},f.default.createElement(h,(0,n.default)({},r,{label:"\u6807\u9898"}),l("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}],initialValue:a.title})(f.default.createElement(c.default,{style:{width:250},placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}))),f.default.createElement(h,(0,n.default)({},r,{label:"\u4f5c\u8005"}),l("author",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f5c\u8005"}],initialValue:a.author})(f.default.createElement(c.default,{style:{width:250},placeholder:"\u8bf7\u8f93\u5165\u4f5c\u8005"}))),f.default.createElement(h,(0,n.default)({},r,{label:"\u6765\u6e90"}),l("source",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u6765\u6e90"}],initialValue:a.source})(f.default.createElement(c.default,{style:{width:250},placeholder:"\u8bf7\u8f93\u5165\u6765\u6e90"}))),f.default.createElement(h,(0,n.default)({},r,{label:"\u7b80\u4ecb"}),l("summary",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7b80\u4ecb"}],initialValue:a.summary})(f.default.createElement(v,{style:{height:100},placeholder:"\u8bf7\u8f93\u5165\u7b80\u4ecb"}))),f.default.createElement(h,(0,n.default)({},r,{label:"\u5185\u5bb9"}),l("content",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5185\u5bb9"}],initialValue:a.content})(f.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9"}))))}}]),t}(f.default.PureComponent);y.contextType=p.default;var b=y;t.default=b},N7K8:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("qVdP");var u=l(a("jsC+"));a("Pwec");var d=l(a("CtXQ"));a("lUTK");var i=l(a("BvKs"));a("14J3");var o=l(a("BMrR"));a("+L6B");var s=l(a("2/Rp"));a("jCWc");var c=l(a("kPKH"));a("5NDa");var f=l(a("5rEg")),p=l(a("p0pE")),m=l(a("d6i3")),v=l(a("1l/V"));a("2qtc");var h=l(a("kLXV"));a("/zsF");var g=l(a("PArb")),y=l(a("2Taf")),b=l(a("vZ4D")),E=l(a("l4Ni")),w=l(a("ujKo")),k=l(a("MhPg"));a("OaEy");var x=l(a("2fM7"));a("y8nQ");var C,M,R,S,P=l(a("Vl3Y")),j=n(a("q1tI")),O=a("Hg0r"),F=l(a("wd/R")),V=l(a("CkN6")),q=l(a("zHco")),L=l(a("pbT3")),D=l(a("PY3j")),I=(a("t3Un"),P.default.Item),T=(x.default.Option,function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")}),A=(C=(0,O.connect)(function(e){var t=e.news,a=e.loading;return{data:t.data,loading:a.effects["news/fetch"]}}),M=P.default.create(),C(R=M((S=function(e){function t(){var e,a;(0,y.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,E.default)(this,(e=(0,w.default)(t)).call.apply(e,[this].concat(n))),a.state={selectedRows:[],formValues:{}},a.columns=[{title:"\u6807\u9898",dataIndex:"title"},{title:"\u4f5c\u8005",dataIndex:"author"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"releaseTime",sorter:!0,render:function(e){return j.default.createElement("span",null,(0,F.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u64cd\u4f5c",render:function(e,t){return j.default.createElement(j.Fragment,null,j.default.createElement("a",{onClick:function(){return a.handleDetailModalVisible(!0,t.id)}},"\u7f16\u8f91"),j.default.createElement(g.default,{type:"vertical"}),j.default.createElement("a",{onClick:a.handleRemove(t.id)},"\u5220\u9664"))}}],a.handleRemove=function(e){return function(){h.default.confirm({title:"\u662f\u5426\u786e\u8ba4\u5220\u9664?",onOk:function(){var t=(0,v.default)(m.default.mark(function t(){return m.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.props.dispatch({type:"news/remove",payload:e});case 2:a.setState(function(t){var a=t.selectedRows,l=Array.isArray(e)?e:[e];return{selectedRows:a.filter(function(e){return!l.some(function(t){return t===e.id})})}});case 3:case"end":return t.stop()}},t)}));function l(){return t.apply(this,arguments)}return l}()})}},a.handleStandardTableChange=function(e,t,l){var n=a.props.dispatch,r=a.state.formValues,u=Object.keys(t).reduce(function(e,a){var l=(0,p.default)({},e);return l[a]=T(t[a]),l},{}),d=(0,p.default)({current:e.current,pageSize:e.pageSize},r,u);l.field&&(d.sorter="".concat(l.field,",").concat(l.order)),n({type:"news/fetch",payload:d})},a.handleMenuClick=function(e){var t=a.props.dispatch,l=a.state.selectedRows;if(0!==l.length)switch(e.key){case"remove":t({type:"rule/remove",payload:{key:l.map(function(e){return e.key})},callback:function(){a.setState({selectedRows:[]})}});break;default:break}},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,n=t.form;n.validateFields(function(e,t){if(!e){var n=(0,p.default)({},t,{updatedAt:t.updatedAt&&t.updatedAt.valueOf()});a.setState({formValues:n}),l({type:"news/fetch",payload:n})}})},a.handleFormReset=function(){a.setState({formValues:{}}),a.props.dispatch({type:"news/fetch",payload:{}})},a.handleDetailModalVisible=function(e,t){a.props.dispatch({type:"news/toggleDetailModalVisible",payload:{visible:e,id:t}})},a}return(0,k.default)(t,e),(0,b.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"news/fetch"})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return j.default.createElement(P.default,{onSubmit:this.handleSearch,layout:"inline"},j.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},j.default.createElement(c.default,{md:8,sm:24},j.default.createElement(I,{label:"\u6807\u9898"},e("title")(j.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165"})))),j.default.createElement(c.default,{md:8,sm:24},j.default.createElement("span",{className:D.default.submitButtons},j.default.createElement(s.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),j.default.createElement(s.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,l=t.loading,n=this.state.selectedRows,o=j.default.createElement(i.default,{onClick:this.handleMenuClick,selectedKeys:[]},j.default.createElement(i.default.Item,{onClick:this.handleRemove(n.map(function(e){return e.id})),key:"remove"},"\u5220\u9664"));return j.default.createElement(q.default,{title:"\u65b0\u95fb"},j.default.createElement(r.default,{bordered:!1},j.default.createElement("div",{className:D.default.tableList},j.default.createElement("div",{className:D.default.tableListForm},this.renderForm()),j.default.createElement("div",{className:D.default.tableListOperator},j.default.createElement(s.default,{icon:"plus",type:"primary",onClick:function(){return e.handleDetailModalVisible(!0)}},"\u65b0\u5efa"),n.length>0&&j.default.createElement("span",null,j.default.createElement(u.default,{overlay:o},j.default.createElement(s.default,null,"\u66f4\u591a\u64cd\u4f5c ",j.default.createElement(d.default,{type:"down"}))))),j.default.createElement(V.default,{selectedRows:n,loading:l,data:a,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),j.default.createElement(L.default,null))}}]),t}(j.PureComponent),R=S))||R)||R),_=A;t.default=_},O6FN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateFormat=t.types=void 0;var l=[{text:"type0-text",value:"type0"},{text:"type1-text",value:"type1"},{text:"type2-text",value:"type2"},{text:"type3-text",value:"type3"}];t.types=l;var n="YYYY-MM-DD";t.dateFormat=n},PY3j:function(e,t,a){e.exports={tableList:"antd-pro-pages-news-list-tableList",tableListOperator:"antd-pro-pages-news-list-tableListOperator",tableListForm:"antd-pro-pages-news-list-tableListForm",submitButtons:"antd-pro-pages-news-list-submitButtons"}},PdRM:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("q1tI")),r=n.default.createContext({}),u=r;t.default=u},QsbZ:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("y8nQ");var r=l(a("Vl3Y"));a("2qtc");var u=l(a("kLXV"));a("T2oS");var d,i,o,s=l(a("W9HT")),c=l(a("d6i3")),f=l(a("p0pE")),p=l(a("1l/V")),m=l(a("2Taf")),v=l(a("vZ4D")),h=l(a("l4Ni")),g=l(a("ujKo")),y=l(a("MhPg")),b=n(a("q1tI")),E=a("Hg0r"),w=l(a("e3Uc")),k=l(a("PdRM")),x=(a("O6FN"),l(a("M0Gi"))),C=(d=(0,w.default)({beforeOpen:function(e){e.isEdit&&e.dispatch({type:"news/fetchItem",payload:e.id})},afterClose:function(e){e.dispatch({type:"news/clearCurrent"})}}),d((o=function(e){function t(){var e,a;(0,m.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,h.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(n))),a.handleCancel=function(){a.props.dispatch({type:"news/toggleDetailModalVisible",payload:{visible:!1}})},a.handleSubmit=function(){var e=a.props,t=e.form,l=e.current,n=e.isEdit;t.validateFieldsAndScroll(function(){var e=(0,p.default)(c.default.mark(function e(t,r){return c.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(!n){e.next=7;break}return e.next=5,a.props.dispatch({type:"news/update",payload:(0,f.default)({},l,r)});case 5:e.next=9;break;case 7:return e.next=9,a.props.dispatch({type:"news/add",payload:(0,f.default)({},r)});case 9:a.handleCancel();case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a}return(0,y.default)(t,e),(0,v.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.form,l=e.loading,n=e.addLoading,r=e.updateLoading,d=e.isEdit,i=e.current;return b.default.createElement(u.default,{visible:t,onCancel:this.handleCancel,title:d?"\u7f16\u8f91\u65b0\u95fb":"\u6dfb\u52a0\u65b0\u95fb",confirmLoading:d?r:n,width:1e3,bodyStyle:{padding:0,minHeight:500},onOk:this.handleSubmit,maskClosable:!1},b.default.createElement(s.default,{spinning:l},b.default.createElement(k.default.Provider,{value:{form:a,isEdit:d,current:i}},b.default.createElement(x.default,null))))}}]),t}(b.default.PureComponent),i=o))||i),M=(0,E.connect)(function(e){return{visible:e.news.detailModalVisible,current:e.news.current,id:e.news.id,isEdit:"undefined"!==typeof e.news.id,loading:e.loading.effects["news/fetchItem"]||!1,addLoading:e.loading.effects["news/add"]||!1,updateLoading:e.loading.effects["news/update"]||!1}})(r.default.create()(C));t.default=M},Zfgh:function(e,t,a){e.exports={"avatar-uploader":"antd-pro-components-upload-image-index-avatar-uploader","ant-upload":"antd-pro-components-upload-image-index-ant-upload"}},dm25:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("06A8")),r=n.default;t.default=r},dxY5:function(e,t,a){e.exports={"avatar-uploader":"antd-pro-pages-news-detail-modal-index-avatar-uploader","ant-upload":"antd-pro-pages-news-detail-modal-index-ant-upload"}},pbT3:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("QsbZ")),r=n.default;t.default=r},qjwT:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DZo9");var r=n(a("8z0m"));a("Pwec");var u=n(a("CtXQ")),d=n(a("qIgq"));a("miYZ");var i=n(a("tsqr")),o=l(a("q1tI")),s=a("t3Un"),c=n(a("Zfgh")),f=["jpeg","jpg","png","gif"],p=localStorage.getItem("accessToken");function m(e,t){var a=new FileReader;a.addEventListener("load",function(){return t(a.result)}),a.readAsDataURL(e)}function v(e){var t=f.map(function(e){return"image/".concat(e)}).includes(e.type);t||i.default.error("\u4f60\u53ea\u80fd\u4e0a\u4f20 ".concat(f.join("/")," \u7c7b\u578b\u7684\u56fe\u7247!"));var a=e.size/1024/1024<5;return a||i.default.error("\u56fe\u7247\u5927\u5c0f\u5fc5\u987b\u5c0f\u4e8e5MB!"),t&&a}var h=function(e){var t=e.value,a=e.onChange,l=(0,o.useState)(t),n=(0,d.default)(l,2),i=n[0],f=n[1],h=(0,o.useState)(!1),g=(0,d.default)(h,2),y=g[0],b=g[1];(0,o.useEffect)(function(){f(t)},[t]);var E=function(e){"uploading"!==e.file.status?("done"===e.file.status&&m(e.file.originFileObj,function(e){f(e),b(!1)}),a&&a(e.file.response.data)):b(!0)};return o.default.createElement(r.default,{name:"file",action:"".concat(s.ROOT_PATH,"/api/files"),listType:"picture-card",className:c.default["avatar-uploader"],showUploadList:!1,onChange:E,beforeUpload:v,headers:{Authorization:"Bearer ".concat(p)}},i?o.default.createElement("img",{src:i,alt:"avatar"}):o.default.createElement("div",null,o.default.createElement(u.default,{type:y?"loading":"plus"}),o.default.createElement("div",null,"\u70b9\u51fb\u4e0a\u4f20")))},g=h;t.default=g},uBsN:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("qjwT")),r=n.default;t.default=r}}]);